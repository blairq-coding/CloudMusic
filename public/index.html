<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=375,user-scalable=no">
  <link rel="icon" href="<%= BASE_URL %>favicon.ico">
  <title>
    <%= htmlWebpackPlugin.options.title %>
  </title>
  <script src="./static/iconfont.js"></script>
  <!-- <title>网易云音乐</title> -->
</head>

<body>
  <noscript>
    <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled.
        Please enable it to continue.</strong>
  </noscript>
  <div id="app"></div>
  <script src="./static/mui.min.js"></script>
  <script>
    // 引入mui.min.js 前提下
    mui.init({
      keyEventBind: {
        backbutton: true //关闭back按键监听
      }
    });
    // 定义初始值
    let first = null;
    // 重写后退方法
    mui.back = function () {
      let locationHash = window.location.hash;
      console.log(locationHash)
      let playDzReg = /^.*playdz.*$/;
      let hitPlaneReg = /^.*hitPlane.*$/;
      let pullBoxReg = /^.*pullBox.*$/;
      // 如果当前是首页
      if (locationHash == "#/") {
        // 第一次按
        if (!first) {
          // 记录第一次按下回退键的时间
          first = new Date().getTime();
          //给出提示
          // mui.toast("真的要退出吗？静静");
          setTimeout(function () {
            //1s中后清除
            first = null;
          }, 1000);
          // 不是第一次按后退
        } else {
          if (new Date().getTime() - first < 500) {
            //如果两次按下的时间小于0.5s，
            plus.runtime.quit(); //那么就退出app
          }
        }
      } else if (locationHash.match(playDzReg)) {
        // 视频播放页面
        history.go("#/duanzi");
      } else if (locationHash.match(hitPlaneReg) || locationHash.match(pullBoxReg)) {
        // 游戏
        history.go("#/games");
      } else {
        // 控制vue 后退
        history.go(-1);
      }
    }
  </script>
  <script src="<%= BASE_URL %>js/rem.js"></script>
  <!-- <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script> -->
</body>

</html>